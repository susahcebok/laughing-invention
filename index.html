<!doctype html>
<html>
<head>
<title>Profile Pic Generator</title>

<meta charset="utf-8" />
<meta name="description" content="Upload foto terbaik Anda yang ingin di jadikan profile lalu klik Unduh">
<meta name="keywords" content="Twibbon, PFP Generator, Avatar, Profile Pic Generator, Framer">
<meta name="author" content="Ferry Ayunda">
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" type="image/x-icon" href="favicon.png">
<link rel="stylesheet" href="css/styles.css">       

<script type="text/javascript" src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script>

</head>
<body>
<main>
    
<h2>Profile Pic Generator</h2>
<p>Klik atau ketuk gambar dan upload foto terbaik Anda yang ingin di jadikan profile lalu klik 'Unduh!'.</p>
    
<p>
<div class="image-upload">
<label for="fileInput">
<img id="preview" src="prev.png" alt="Preview Twibbon"/>
<img id="twibbon" src="picture.png" alt="Frame Twibbon" style="display: none"/>
<canvas id="cvs" style="display: none">Your browser does not support the canvas tag.</canvas>
</label>
<input id="fileInput" type="file" accept="image/*">
</div>   
</p>
    
<p>
<button class="btn" id="submit" onclick="drawImage()" disabled>Unduh</button>
<!--<button class="btn gray" id="cancel" onclick="location.reload()">Ganti foto</button>-->
</p>

<p>
<span id="result"></span> <a href="#" id="unduh" download="download.png" style="display: none">Klik disini.</a>
</p>

<!--<p>Bagikan Profile ini ke media sosial Anda: <span id="cvs" onclick="shareCanvas()"><strong>Share</strong></span></p>-->
<p id="share">Bagikan Profile ini ke media sosial Anda: <em>share</em>.</p>  
    
<!-- COPY FROM THERE -->
<div class="cookiePolicy">
<div class="cookiePolicy__content">
Jangan ragu untuk menghubungi kami jika Anda memiliki pertanyaan atau memerlukan bantuan lebih lanjut. 
</div>
<div class="cookiePolicy__close">
<svg viewPort="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg">
<line x1="1" y1="11" 
x2="11" y2="1" 
stroke="#208798" 
stroke-width="2"/>
<line x1="1" y1="1" 
x2="11" y2="11" 
stroke="#208798" 
stroke-width="2"/>
</svg>
</div>
</div>
<!-- TO THERE -->

</main>

<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="js/share.js"></script>

<!-- cookies -->  
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>    
<script type="text/javascript" src="js/cookies.js"></script>    

<!--
<script>
const img = document.querySelector("img");
const canvas = document.querySelector("canvas");

function resolveCanvasDimensions() {
const { width, height } = window.getComputedStyle(img);

canvas.width = +parseFloat(width) * 2;
canvas.height = +parseFloat(height) * 2;

canvas.style.width = width * 2;
canvas.style.height = height * 2;
const ctx = canvas.getContext("2d");

ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
}

async function dataUrlToBlob(url) {
return fetch(url).then((res) => res.blob());
}
    

function toggleButtons(enabled) {
document.querySelectorAll("em").forEach((button) => {
enabled
? button.removeAttribute("disabled")
: button.setAttribute("disabled", true);
});
}

    
function share() {
let start = Date.now();
toggleButtons(false);
resolveCanvasDimensions();
let canvascopy = Date.now();
let url = canvas.toDataURL("image/png");
let dataurl = Date.now();
dataUrlToBlob(url).then((blob) => {
let blobtime = Date.now();
var file = new File([blob], "prev.png", {
type: "image/png"
});
var filesArray = [file];
var shareData = { files: filesArray };

if (navigator.canShare && navigator.canShare(shareData)) {
// Adding title afterwards as navigator.canShare just
// takes files as input
shareData.title = "Profile Pic Generator";
shareData.text = "Profile Pic Generator";
shareData.url = "https://susahcebok.github.io/laughing-invention/";

navigator
.share(shareData)
.then(() => alert("Share was successful"))
.catch((error) =>
alert("Sharing failed")
);
} else {
alert("Your system doesn't support sharing files");
}
toggleButtons(true);
});
}

function initialize() {
img.addEventListener(
"load",
() => {
toggleButtons(true);
},
false
);
img.crossOrigin = "Anonymous";
img.src =
"https://susahcebok.github.io/laughing-invention/prev.png";
}

document.getElementById("share").addEventListener("click", share);

toggleButtons();
initialize();
-->
</script>
</body>
</html>
