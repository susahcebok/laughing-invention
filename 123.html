<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<title>Twibbon Generator</title>
<meta content="The page you are looking for doesn&#x27;t exist or has been moved." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">

<link href="favicon.png" rel="shortcut icon" type="image/x-icon">
<link rel="stylesheet" href="css/style.css">

<script type="text/javascript" src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script>
</head>

<body>
<main>
  
<h1>Twibbon Generator</h1>
<p>Upload gambar terbaik Anda yang ingin di jadikan twibbon lalu klik '<strong>UNDUH</strong>'.</p>

<p>
<div class="image-upload">
<label for="fileInput">
<img id="preview" src="prev.png"/>
<img id="twibbon" src="picture.png" style="display: none"/>
<canvas id="cvs" style="display: none"></canvas>
<p>Pastikan gambar yang di upload memiliki ukuran.</p>
<input id="fileInput" type="file" accept="image/*" style="display:none;"/>  
</label>
</div>
</p>
  
<p>
<span id="output"></span> <a href="#" class="unduh" download="download.png" style="display: none">Klik disini.</a>
</p>
  
<p>
<button class="send" onclick="drawImage()">Unduh</button>
<!--<a href="#" class="unduh" download="download.png" style="display: none">Download</a>-->
<button id="reset" onclick="location.reload()">Reset</button>  
</p>
</main>

<script>
function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function(e) {
      $("#preview").attr("src", e.target.result);
    };
    reader.readAsDataURL(input.files[0]);
  }
}

function drawImage() {

  var twibbon = new Image();
  var picture = new Image();
  var twibbon = document.getElementById('twibbon');
  var picture = document.getElementById('preview');
  var canvas = document.getElementById('cvs');
  var context = canvas.getContext('2d');

  canvas.width = 1024;
  canvas.height = 1024;
  context.drawImage(picture, 0, 0, canvas.width, canvas.height);
  context.drawImage(twibbon, 0, 0, canvas.width, canvas.height);

  var hasil = canvas.toDataURL("image/png");
  document.getElementById('preview').src = hasil;

  console.log("Drew!");

  $('.send').css('display', 'none');
  $('.unduh').css('display', 'inline-block');
  $('.unduh').attr('href', hasil);
}

$("#fileInput").change(function() {
  readURL(this);
});


$('.send').bind("click",function() { 
  var imgVal = $('#fileInput').val(); 
  if(imgVal=='') 
  { 
    output.innerHTML = "Tidak ada file gambar yang dipilih, lanjut unduh? ";
  } else {
    output.innerHTML = "Anda berhasil mengunduh! Terima kasih. Jika unduhan tidak dimulai, ";
  }
}); 
</script>
</body>
</html>
